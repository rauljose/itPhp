<!DOCTYPE html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>styleSheetsHelper Test</title>
    <link rel="stylesheet" href="qunit-2.14.1.css">

    <!-- styles for test data -->
        <link rel="stylesheet" href="csstest.css">

        <style>
            .claseTestExistsHelpers {color:red;background-color: yellow}
            .claseTestGet{background-color:yellow;color:red;}
            .claseTestSetText{background-color:yellow;color:red;}
        </style>
        <style>
            .claseTestExistsHelpers {color:blue;padding:1em}
            .claseTestGet{color:blue;padding:1em}
            .claseTestSetText{background-color:yellow;color:blue;}

        </style>
    <!-- styles for test data end -->
</head>
<body>

<div id="qunit"></div>
<div id="qunit-fixture"></div>
<script src="https://code.jquery.com/qunit/qunit-2.14.1.js"></script>
<script src="../styleSheet.js"></script>
<script>

QUnit.module("Class exists");
    QUnit.test ("exists", function(assert) {
        assert.false(styleSheetsHelper.exists('.claseNoDefinida'), 'clase no definida');
        assert.true(styleSheetsHelper.exists('.claseTestExistsHelpers'), 'clase claseTestExistsHelpers en style tag');
        assert.true(styleSheetsHelper.exists('.testExisteEnCss'), 'clase testExisteEnCss en .css');
    });

QUnit.module("Get class");
    QUnit.test ("getStyleString", function(assert) {
        assert.deepEqual(
            styleSheetsHelper.getStyleString('.claseTestGet'),
            "background-color:yellow;color:blue;padding:1em;",
            "clase existente"
        );
        assert.deepEqual(
            styleSheetsHelper.getStyleString('.claseNoExiste'),
            "",
            "clase no existente"
        );
    });

    QUnit.test ("getStyleObject", function(assert) {
        assert.deepEqual(
            styleSheetsHelper.getStyleObject('.claseTestGet'),
            {
                "background-color": "yellow",
                "color": "blue",
                "padding": "1em"
            },
            "clase existente"
        );
        assert.deepEqual(
            styleSheetsHelper.getStyleObject('.claseNoExiste'),
            {},
            "clase no existente"
        );
    });

QUnit.module("Set add/update class");

    styleSheetsHelper.setStyle('.claseTestSetText', "background-color:red;padding:1em");
    QUnit.test ("setStyle update in tag, with string", function(assert) {
        assert.deepEqual(
            styleSheetsHelper.getStyleString('.claseTestSetText'),
            "background-color:red;color:blue;padding:1em;",
            "Modifica clase en style tag con style string"
        );
    });


    QUnit.test ("setStyle update in css link, with object", function(assert) {
        styleSheetsHelper.setStyle('.claseTestSetLink', "background-color:red;padding:1em");
        assert.deepEqual(
            styleSheetsHelper.getStyleString('.claseTestSetLink'),
            "background-color:red;color:blue;padding:1em;",
            "Modifica class en .css file con string"
        );
    });


    styleSheetsHelper.setStyle('.newClassString', "background-color:red;padding:1em");
    QUnit.test ("setStyle insert with string", function(assert) {
        assert.deepEqual(
            styleSheetsHelper.getStyleString('.newClassString'),
            "background-color:red;padding:1em;",
            "Agrega nueva clase con string"
        );
    });


    styleSheetsHelper.setStyle('.newClassObject', "background-color:blue;padding:2em");
    QUnit.test ("setStyle insert with object", function(assert) {
        assert.deepEqual(
            styleSheetsHelper.getStyleString('.newClassObject'),
            "background-color:blue;padding:2em;",
            "Agrega nueva clase con object"
        );
    });

QUnit.module("Helpers");

    QUnit.test ("styleObject2String", function(assert) {
        assert.equal(styleSheetsHelper.styleObject2String({}), "", 'Empty object');
        assert.deepEqual(
            styleSheetsHelper.styleObject2String(
                {color:'red', 'background-color':'yellow',padding:0,margin:'1em'}
            ),
            "color:red;background-color:yellow;padding:0;margin:1em;",
            'Style object a string'
        );
    } );

    QUnit.test ("styleString2object", function(assert) {
        assert.deepEqual(styleSheetsHelper.styleString2object(""), {}, 'Empty string');
        assert.deepEqual(styleSheetsHelper.styleString2object(" "), {}, 'Blank string');
        assert.deepEqual(
            styleSheetsHelper.styleString2object(
                "color:red;background-color:yellow;padding:0;margin:1em;"
            ),
            {color:'red', 'background-color':'yellow',padding:'0',margin:'1em'},
            'Empty Style object a string'
        );
    } );


    QUnit.test ("getLastRule", function(assert) {
        assert.false(styleSheetsHelper._getLastRule('claseNoExiste'), '_getLastRule clase no definida');
    });


</script>
</body>

